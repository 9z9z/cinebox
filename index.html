<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÙØ§ØµÙ„ Ø£ÙÙ„Ø§Ù… - Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>ğŸ“½ï¸ ÙØ§ØµÙ„ Ø£ÙÙ„Ø§Ù…</h1>
  </header>
  <nav>
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="#addForm">Ø£Ø¶Ù ÙÙ„Ù…</a>
  </nav>
  <main class="container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙ„Ù…..." />
      <button onclick="searchMovies()">Ø¨Ø­Ø«</button>
    </div>
    <div id="movieList" class="movie-list"></div>

    <section id="addForm" class="add-movie-form">
      <h2>Ø£Ø¶Ù ÙÙ„Ù… Ø¬Ø¯ÙŠØ¯</h2>
      <input type="text" id="movieTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙ„Ù…" />
      <textarea id="movieDesc" rows="4" placeholder="Ù‚ØµØ© Ø§Ù„ÙÙ„Ù…"></textarea>
      <input type="text" id="movieEmbed" placeholder="Ø±Ø§Ø¨Ø· Ø¥ÙŠÙ…Ø¨Ø¯ (Ø¹Ø±Ø¶)" />
      <input type="text" id="movieDownload" placeholder="Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" />
      <button onclick="addMovie()">Ø£Ø¶Ù Ø§Ù„ÙÙ„Ù…</button>
    </section>
  </main>

<script>
  // Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ù…Ù† localStorage Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù…ØµÙÙˆÙØ© ÙØ§Ø±ØºØ©
  let movies = JSON.parse(localStorage.getItem('movies')) || [];

  // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙÙŠ Ø§Ù„ØµÙØ­Ø©
  function renderMovies(list) {
    const container = document.getElementById('movieList');
    container.innerHTML = '';
    if(list.length === 0) {
      container.innerHTML = '<p>Ù…Ø§ ÙÙŠÙ‡ Ø£ÙÙ„Ø§Ù… Ù‡Ù†Ø§.</p>';
      return;
    }
    list.forEach((movie, idx) => {
      const card = document.createElement('div');
      card.className = 'movie-card';
      card.innerHTML = `
        <h3>${movie.title}</h3>
        <p>${movie.description.substring(0, 70)}...</p>
      `;
      card.onclick = () => {
        // Ù†Ø±ÙˆØ­ Ù„ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙÙ„Ù… Ù…Ø¹ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø¹Ø±Ù
        window.location.href = `movie.html?id=${idx}`;
      };
      container.appendChild(card);
    });
  }

  // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© ÙÙ„Ù… Ø¬Ø¯ÙŠØ¯
  function addMovie() {
    const title = document.getElementById('movieTitle').value.trim();
    const desc = document.getElementById('movieDesc').value.trim();
    const embed = document.getElementById('movieEmbed').value.trim();
    const download = document.getElementById('movieDownload').value.trim();

    if(!title || !desc || !embed) {
      alert('Ø¹Ø¨ÙŠ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.');
      return;
    }

    movies.push({title, description: desc, embed, download});
    localStorage.setItem('movies', JSON.stringify(movies));
    alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙ„Ù… ÙŠØ§ Ø°ÙŠØ¨ ğŸ”¥');
    
    // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    renderMovies(movies);

    // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
    document.getElementById('movieTitle').value = '';
    document.getElementById('movieDesc').value = '';
    document.getElementById('movieEmbed').value = '';
    document.getElementById('movieDownload').value = '';
  }

  // Ø¯Ø§Ù„Ø© Ø¨Ø­Ø«
  function searchMovies() {
    const keyword = document.getElementById('searchInput').value.trim().toLowerCase();
    if(!keyword) {
      renderMovies(movies);
      return;
    }
    const filtered = movies.filter(m => m.title.toLowerCase().includes(keyword));
    renderMovies(filtered);
  }

  // Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  renderMovies(movies);
</script>
</body>
</html>
